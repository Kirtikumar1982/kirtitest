pipeline {
    agent {
		label 'master'
	}

stages {
   stage('checkout') {
            steps {
                node('master'){
                checkout scm
               }
            }
        }

        stage('package') {
            steps {
                node('master'){
                
                sh 'mvn clean install'
               }
            }
        }
   stage('Create Docker Image') {
   steps{
   node('master') {
   sh 'sudo usermod -aG docker kirtikumar1982'
   sh 'sudo chmod 666 /var/run/docker.sock'
   sh 'docker build -t kirtitest/microtest .'
   
    }
    }
    }
  }
}
